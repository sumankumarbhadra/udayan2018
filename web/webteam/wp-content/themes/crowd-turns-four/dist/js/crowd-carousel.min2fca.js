function crowdCarousel(t){"use strict";function n(){p=[],requestAnimationFrame(function(){for(;E.firstChild;)E.removeChild(E.firstChild)}),m.slice(0,3).forEach(function(t){p.push(t.cloneNode(!0))}),p.forEach(function(t){requestAnimationFrame(function(){E.appendChild(t)})}),requestAnimationFrame(function(){s(),x.domMutated()})}function e(t){1==t?m.push(m.shift()):t==-1?m.unshift(m.pop()):0!=t&&(m=i(m,t)),r(t),n()}function i(t,n){if(t=t.slice(),n>0)for(;n--;)t.push(t.shift());else for(;n++;)t.unshift(t.pop());return t}function a(){D.forEach(o),b.forEach(o)}function o(t){requestAnimationFrame(function(){t.disabled=!t.disabled})}function s(){b.forEach(function(t){t.dataset.slideIndex==v?t.classList.add("current-slide"):t.classList.remove("current-slide")})}function r(t){v+=t,v>=m.length?v=-1+t:v<0&&(v=m.length+v)}function c(t){C=t.target.dataset.slideIndex-v,1==C?d():C==-1?u():e(C)}function d(){x.animationStart(),E.classList.add("next"),a(),setTimeout(function(){x.animationEnd(),E.classList.remove("next"),e(1),a()},x.animationDuration)}function u(){x.animationStart(),E.classList.add("prev"),a(),setTimeout(function(){x.animationEnd(),E.classList.remove("prev"),e(-1),a()},x.animationDuration)}var l,f,m,p,h,E,v,C,L,x=t||{container:".crowd-carousel",item:".carousel-item",animationDuration:1500,pauseDuration:3e3,autoplay:!0,buttons:!0,dots:!1,animationStart:function(){},animationEnd:function(){},domMutated:function(){}},D=[],b=[],I=!1;return function(){for(h=document.querySelector(x.container),l=h,m=[].slice.call(h.children),E=document.createElement("div"),E.classList.add("items-container"),f=document.createElement("div"),f.classList.add("viewport"),f.appendChild(E);l.firstChild;)l.removeChild(l.firstChild);requestAnimationFrame(function(){l.appendChild(f)}),m.length<=2&&(requestAnimationFrame(function(){l.classList.add("disabled")}),I=!0),m.unshift(m.pop()),v=0,n(),I||(x.buttons&&(D=[document.createElement("button"),document.createElement("button")],D[0].textContent="previous",D[0].classList.add("carousel-prev"),D[1].textContent="next",D[1].classList.add("carousel-next"),D.forEach(function(t){f.appendChild(t)}),D[0].addEventListener("click",u,!1),D[1].addEventListener("click",d,!1)),x.dots&&(L=document.createElement("div"),L.classList.add("carousel-dot-wrapper"),L.addEventListener("click",c,!1),m.forEach(function(t,n){b.push(document.createElement("button")),b[n].textContent=n+1,b[n].classList.add("carousel-dot"),b[n].dataset.slideIndex=n}),b.forEach(function(t){L.appendChild(t)}),f.appendChild(L)),x.autoplay&&(x.timerID=setInterval(d,x.pauseDuration+x.animationDuration)))}(),{next:d,previous:u,currentIndex:function(){return v},carousel:l,timerID:x.timerID}}